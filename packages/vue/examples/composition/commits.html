<script src="../../dist/vue.global.js"></script>

<div id="demo">
  <h1>Latest Vue.js Commits</h1>
</div>

<script>
const { createApp, ref, watchEffect,h,defineComponent,reactive  } = Vue
const API_URL = `https://api.github.com/repos/vuejs/vue-next/commits?per_page=3&sha=`

const truncate = v => {
  const newline = v.indexOf('\n')
  return newline > 0 ? v.slice(0, newline) : v
}

const formatDate = v => v.replace(/T|Z/g, ' ')


const app = createApp({});
// setup(props) {
//     debugger
//     const obj = reactive({ count: 0 });
//     obj.count = 1;
//     return {}
//   }

// app.mixin({
//   hello: 'goodbye!',
//   created() {
//     console.log(this.$options.hello) // => "hello!"
//   }
// })

// app.config.optionMergeStrategies.hello = (parent, child) => {
//   console.log(child);
//   return `Hello, bbbbb ${child}`
// }
// app.config.performance = true
// app.config.compilerOptions.isCustomElement = tag => tag.startsWith('ion-')

// const MyComponent = defineComponent({
//   data() {
//     return {
//       hello: "Vue!"
//     }
//   },
//   render() {
//     return h('h1',{childValue: 'component-child!'},[
//     `Hello ${this.hello} Vue3`,
//     h('h2', `hello child ${this.hello}`)
//     ])
//   },
// })

// ----------------------------------------------------------------- start
// 创建全局组件
// app.component('component-a',{
//   data() {
//     return {
//       hello: "Vue!"
//     }
//   },
//   render() {
//     return h('h1',{childValue: 'component-child!'},[
//     `Hello ${this.hello} Vue3`,
//     h('h2', `hello child ${this.hello}`)
//     ])
//   },
//   created() {
//     console.log(this.$options.hello)
//   }
// })
// ----------------------------------------------------------------- end
debugger
app.mount("#demo");



// createApp({
//   setup() {
//     const currentBranch = ref('master')
//     const commits = ref(null)

//     watchEffect(() => {
//       fetch(`${API_URL}${currentBranch.value}`)
//         .then(res => res.json())
//         .then(data => {
//           console.log(data)
//           commits.value = data
//         })
//     })

//     return {
//       branches: ['master', 'sync'],
//       currentBranch,
//       commits,
//       truncate,
//       formatDate
//     }
//   }
// }).mount('#demo')
</script>

<style>
  #demo {
    font-family: 'Helvetica', Arial, sans-serif;
  }
  a {
    text-decoration: none;
    color: #f66;
  }
  li {
    line-height: 1.5em;
    margin-bottom: 20px;
  }
  .author, .date {
    font-weight: bold;
  }
</style>
